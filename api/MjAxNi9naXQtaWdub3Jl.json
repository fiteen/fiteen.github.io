{"title":"Git 手册之用 .gitignore 忽略文件","date":"2016-11-21T17:34:57.000Z","date_formatted":{"ll":"Nov 22, 2016","L":"11/22/2016","MM-DD":"11-22"},"link":"2016/git-ignore","comments":true,"tags":[".gitignore"],"categories":["Git"],"updated":"2022-09-02T06:38:13.692Z","content":"<p>提交代码后我们经常发现，即使没有任何代码修改，有一些文件也会提示更新，例如：<code>UserInterfaceState.xcuserstate</code>、<code>.DS_Store</code> 等。</p>\n<p>这种情况可以通过添加 <code>.gitignore</code> 文件解决。</p>\n<span id=\"more\"></span>\n<h2 id=\"如何在项目中添加-.gitignore\">如何在项目中添加 <code>.gitignore</code><a title=\"#如何在项目中添加-.gitignore\" href=\"#如何在项目中添加-.gitignore\"></a></h2>\n<p>具体<strong>步骤</strong>如下：</p>\n<p>步骤一：打开终端 进入项目中 <code>.git</code> 同目录下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /path/to/file</span><br></pre></td></tr></table></figure>\n<p>步骤二：创建 <code>.gitignore</code> 文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">touch</span> .gitignore</span><br></pre></td></tr></table></figure>\n<p>步骤三：打开 <code>.gitignore</code> 文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">open .gitignore</span><br></pre></td></tr></table></figure>\n<p>步骤四：参照 <a href=\"https://github.com/github/gitignore\" target=\"_blank\">.gitignore 模版</a>，找到对应的开发语言，将模版文本粘贴到自己的 <code>.gitignore</code> 中</p>\n<p>步骤五：更新项目：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .gitignore</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;feat: add .gitignore file&quot;</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n<p><strong>注意</strong>：</p>\n<p>1、<code>.gitignore</code> 只能作用于未跟踪的文件，也就是未被 git 记录的文件；</p>\n<p>2、已经 <code>push</code> 过的文件，如果想要在本地保留，但想要从远程仓库中删除，并在以后的提交中忽略，执行命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">rm</span> -r --cached /path/to/file</span><br></pre></td></tr></table></figure>\n<p>3、已经 <code>push</code> 过的文件，想在以后的提交时忽略跟踪，也就是说即使本地已经修改过，但不修改也不删除远程仓库中相应文件，执行命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git update-index --assume-unchanged /path/to/file</span><br></pre></td></tr></table></figure>\n<p>如果要取消忽略，执行命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git update-index –no-assume-unchanged /path/to/file</span><br></pre></td></tr></table></figure>\n<h2 id=\"删除-.ds_store\">删除 .DS_Store<a title=\"#删除-.ds_store\" href=\"#删除-.ds_store\"></a></h2>\n<p><code>.DS_Store</code> 是 Mac OS 保存文件夹的自定义属性的隐藏文件。如果项目中还没有自动生成 <code>.DS_Store</code>，把它加入到 <code>.gitignore</code> 中即可；但如果项目中已经有了，先从项目中将其删除，再把它加入到 <code>.gitignore</code> 里。步骤如下：</p>\n<p>步骤一：删除项目中的所有 <code>.DS_Store</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find . -name .DS_Store -print0 | xargs -0 git <span class=\"built_in\">rm</span> -f --ignore-unmatch</span><br></pre></td></tr></table></figure>\n<p>步骤二：将 <code>.DS_Store</code> 加入到 <code>.gitignore</code> 文件中</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> .DS_Store &gt;&gt; ~/.gitignore</span><br></pre></td></tr></table></figure>\n<p>步骤三：更新项目</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add --all</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;feat: ignore .DS_Store&quot;</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n<p>如果只需要删除磁盘上的 <code>.DS_Store</code>，用下面的命令来删除当前目录及其子目录下的所有 <code>.DS_Store</code> 文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find . -name <span class=\"string\">&#x27;*.DS_Store&#x27;</span> -<span class=\"built_in\">type</span> f -delete</span><br></pre></td></tr></table></figure>\n<p>你也可以通过输入这串命令直接禁止生成 <code>.DS_store</code>，重启 Mac 即可生效：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool TRUE</span><br></pre></td></tr></table></figure>\n<p>恢复 <code>.DS_store</code> 生成的命令为：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">defaults delete com.apple.desktopservices DSDontWriteNetworkStores</span><br></pre></td></tr></table></figure>","prev":{"title":"如何在 Xcode 8 上安装插件","link":"2016/install-plugins-on-xcode8"},"next":{"title":"Xcode 代码块生成和移植的小技巧","link":"2016/xcode-code-snippets"},"plink":"https://blog.fiteen.top/2016/git-ignore/","toc":[{"id":"如何在项目中添加-.gitignore","title":"如何在项目中添加 .gitignore","index":"1"},{"id":"删除-.ds_store","title":"删除 .DS_Store","index":"2"}],"reward":true,"copyright":{"author":"FiTeen","link":"<a href=\"https://blog.fiteen.top/2016/git-ignore/\" title=\"Git 手册之用 .gitignore 忽略文件\">https://blog.fiteen.top/2016/git-ignore/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}